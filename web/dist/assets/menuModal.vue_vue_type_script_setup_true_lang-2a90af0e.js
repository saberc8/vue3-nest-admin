import{d as w,h as C,O as x,r as B,a as n,o as s,k as u,w as p,e as d,c as I,H as E,u as r,G as J,ar as L,an as m,as as P}from"./index-7b1c4b91.js";const $=w({__name:"menuModal",props:{visible:null,title:null,formData:null},emits:["closeModal","refresh"],setup(c,{emit:i}){const l=c;let e=C({id:null,name:"1",title:"1",path:"1",icon:"1",component:"1",redirect:"1",pid:0,orderNo:0,frameSrc:"1"});l.formData,x(()=>l.formData,a=>{if(a){const t=JSON.parse(JSON.stringify(a));e.id=t.id,e.name=t.name,e.title=t.title,e.path=t.path,e.icon=t.icon,e.component=t.component,e.redirect=t.redirect,e.pid=t.pid,e.orderNo=t.orderNo,e.frameSrc=t.frameSrc}},{immediate:!0});const f=B([{type:"input",label:"名称",placeholder:"请输入名称",value:"name"},{type:"input",label:"标题",placeholder:"请输入标题",value:"title"},{type:"input",label:"路由",placeholder:"请输入路由",value:"path"},{type:"input",label:"图标",placeholder:"请输入图标",value:"icon"},{type:"input",label:"组件",placeholder:"请输入组件",value:"component"},{type:"input",label:"PID",placeholder:"请输入PID",value:"pid"},{type:"input",label:"父级定向",placeholder:"请输入父级定向",value:"redirect"},{type:"input",label:"排序",placeholder:"请输入排序",value:"orderNo"},{type:"input",label:"内嵌iframe",placeholder:"请输入内嵌iframe",value:"frameSrc"}]),h=()=>{if(l.title,l.title==="编辑菜单"){const a={id:Number(e.id),name:e.name,title:e.title,path:e.path,icon:e.icon,component:e.component,redirect:e.redirect,pid:e.pid,orderNo:e.orderNo,frameSrc:e.frameSrc};v(a)}else b()},v=a=>{L(a).then(t=>{m.success("修改成功"),i("refresh",!1)})},b=()=>{P(e).then(a=>{a.id&&(m.success("添加成功"),i("refresh",!1))})},_=()=>{S(e),i("closeModal",!1)},y=a=>{},N=a=>{},S=a=>{Object.keys(a).forEach(t=>{a[t]=null})};return(a,t)=>{const k=n("a-input"),M=n("a-form-item"),F=n("a-form"),D=n("a-modal");return s(),u(D,{visible:c.visible,title:c.title,onOk:h,onCancel:_},{default:p(()=>[d(F,{model:r(e),name:"basic","label-col":{span:6},"wrapper-col":{span:14},autocomplete:"off",onFinish:y,onFinishFailed:N},{default:p(()=>[(s(!0),I(J,null,E(r(f),(o,O)=>(s(),u(M,{key:O,label:o.label,name:o.value},{default:p(()=>[d(k,{value:r(e)[`${o.value}`],"onUpdate:value":g=>r(e)[`${o.value}`]=g},null,8,["value","onUpdate:value"])]),_:2},1032,["label","name"]))),128))]),_:1},8,["model"])]),_:1},8,["visible","title"])}}});export{$ as _};
