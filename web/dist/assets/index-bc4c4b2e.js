import{d as M,r,a as l,o as k,c as C,e as t,w as i,u as o,ai as F,l as P,G as Y,b as x,aj as A,ak as c,al as z,am as N,an as T}from"./index-7b1c4b91.js";import{P as L}from"./index-6033dac5.js";import{_ as S}from"./menuModal.vue_vue_type_script_setup_true_lang-2a90af0e.js";const q=x("span",{style:{"font-weight":"bold","font-size":"20px",color:"#000"}},"系统菜单表单",-1),I=M({__name:"index",setup(B){const s=r(),a=r(!1),n=r("新增菜单"),p=A,u=r(),w=[{type:"seq",width:60,treeNode:!0},{field:"id",title:"ID",width:80},{field:"pid",title:"PID",width:80},{field:"title",title:"标题",showOverflow:!0,showHeaderOverflow:!0,width:150},{field:"name",title:"名称",showOverflow:!0,showHeaderOverflow:!0,width:150},{field:"path",title:"路由",showOverflow:!0,showHeaderOverflow:!0,width:150},{field:"component",title:"组件",showOverflow:!0,showHeaderOverflow:!0,width:150},{field:"redirect",title:"父级重定向",showOverflow:!0,showHeaderOverflow:!0,width:150},{field:"orderNo",title:"排序",showOverflow:!0,showHeaderOverflow:!0,width:150},{field:"icon",title:"图标",showOverflow:!0,showHeaderOverflow:!0,width:150},{field:"frameSrc",title:"内嵌iframe",showOverflow:!0,showHeaderOverflow:!0,width:150},{field:"ignoreKeepAlive",title:"是否缓存",showOverflow:!0,showHeaderOverflow:!0,width:100,align:"center",slots:{default:({row:e})=>t(l("a-tag"),{color:e.ignoreKeepAlive?"pink":"green"},()=>e.ignoreKeepAlive?"否":"是")}},{field:"createdAt",title:"创建时间",showOverflow:!0,showHeaderOverflow:!0,width:150,formatter:e=>c(e.createdAt).format("YYYY-MM-DD HH:mm:ss")},{field:"updatedAt",title:"更新时间",showOverflow:!0,showHeaderOverflow:!0,width:150,formatter:e=>c(e.updatedAt).format("YYYY-MM-DD HH:mm:ss")},{title:"操作",width:200,align:"center",slots:{default:({row:e})=>t(l("a-space"),{size:"middle"},{default:()=>[t(l("a-button"),{type:"primary",size:"small",onClick:()=>{g(e)}},()=>"编辑"),t(l("a-button"),{type:"danger",size:"small",onClick:()=>{z.confirm({title:"提示",content:"确定删除该菜单吗？",onOk:()=>{H(e.id)}})}},()=>"删除")]})},fixed:"right"}],h={treeConfig:{transform:!0,rowField:"id",parentField:"pid"},seqConfig:{seqMethod:({row:e,rowIndex:d})=>e.pid===0?d+1:""}},m=!0,v=[{label:"名称",field:"name",type:"input",componentProps:{placeholder:"请输入名称"}},{label:"菜单标题",field:"title",type:"input",componentProps:{placeholder:"请输入菜单标题"}},{label:"组件路径",field:"path",type:"input",componentProps:{placeholder:"请输入路由"}},{label:"名称",field:"component",type:"input",componentProps:{placeholder:"请输入组件路径"}},{label:"父级id",field:"pid",type:"input",componentProps:{placeholder:"请输入父级id"}}],O=r({page:1,size:50});let b=r([]);const _=()=>{n.value="新增菜单",a.value=!0},g=e=>{a.value=!0,n.value="编辑菜单",u.value=e},H=e=>{N({id:e}).then(d=>{T.success("删除成功"),s.value.reloadData()})},f=()=>{a.value=!1},y=()=>{f(),s.value.reloadData()};return(e,d)=>{const D=l("a-button");return k(),C(Y,null,[t(L,{ref_key:"proTable",ref:s,dataSource:o(b),columns:w,params:o(O),searchForm:v,showForm:m,getListFunc:o(p),gridOptions:h},{toolbar_title:i(()=>[q]),toolbar_buttons:i(()=>[t(D,{type:"primary",onClick:_},{icon:i(()=>[t(o(F))]),default:i(()=>[P(" 新增 ")]),_:1})]),_:1},8,["dataSource","params","getListFunc"]),t(S,{visible:o(a),title:o(n),formData:o(u),onCloseModal:f,onRefresh:y},null,8,["visible","title","formData"])],64)}}});export{I as default};
